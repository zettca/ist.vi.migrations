(window.webpackJsonp=window.webpackJsonp||[]).push([[0],[,,,,function(t,n,e){t.exports=e(9)},function(t,n,e){},,function(t,n,e){},,function(t,n,e){"use strict";e.r(n);var a=e(3),r=e(1),o=e(0);function c(t,n,e){return Object(o.x)(t).append("svg").attr("width",n).attr("height",e)}var i,u,l,f,s={drawMap:function(t,n,e,a,r){l=c(t,n,e);var i={};r.forEach(function(t){return i[t.id]=+t.population});var u=o.w().domain([10,100,500,1e3,5e3,1e4,5e4,1e5,5e5,15e5].map(function(t){return 1e3*t})).range(["#f7fbff","#deebf7","#c6dbef","#9ecae1","#6baed6","#4292c6","#2171b5","#08519c","#08306b","#03132b"]),f=o.m().scale(n/4).translate([n/2,e/1.2]),s=o.n().projection(f),d=o.z().scaleExtent([1,6]).on("zoom",function(){p.selectAll("path").attr("transform",o.g.transform)});l.call(d);var p=l.append("g").attr("class","countries");p.selectAll("path").data(a.features).enter().append("path").attr("id",function(t){return t.id}).attr("name",function(t){return t.properties.name}).attr("d",s).style("fill",function(t){return u(i[t.id])}).on("click",m).on("mouseover",function(){}).on("mouseout",function(){}).on("contextmenu",function(){console.log("right clicked...")})},drawPlot:function(t,n,e,a){i=c(t,n,e);var r={top:20,right:20,bottom:30,left:40},u=o.u().domain(o.h(a,function(t){return t.x})).nice().range([r.left,n-r.right]),l=o.u().domain(o.h(a,function(t){return t.y})).nice().range([e-r.bottom,r.top]);i.append("g").attr("class","axis-x").call(function(t){t.attr("transform","translate(0,".concat(e-r.bottom,")")).call(o.b(u)).call(function(t){return t.select(".domain").remove()})}),i.append("g").attr("class","axis-y").call(function(t){t.attr("transform","translate(".concat(r.left,",0)")).call(o.c(l)).call(function(t){return t.select(".domain").remove()}).call(function(t){return t.select(".tick:last-of-type text").clone()})}),i.append("g").attr("class","circles").selectAll("circle").data(a).enter().append("circle").attr("cx",function(t){return u(t.x)}).attr("cy",function(t){return l(t.y)}).attr("r",4),i.append("g").attr("class","text").selectAll("text").data(a).enter().append("text").attr("x",function(t){return u(t.x)}).attr("y",function(t){return l(t.y)}).text(function(t){return t.name}).call(function(t){for(var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:300,e=t.nodes(),a=function(t){return t.attr("text-anchor","start").attr("dy","0.32em")},r=function(t){return t.attr("text-anchor","end").attr("dy","0.32em")},c=function(t){return t.attr("text-anchor","middle").attr("dy","0.0em")},i=function(t){return t.attr("text-anchor","middle").attr("dy","0.8em")},u=e.map(function(t){return{fx:+t.getAttribute("x"),fy:+t.getAttribute("y")}}),l=u.map(function(t){var n=t.fx,e=t.fy;return{x:n,y:e}}),f=u.map(function(t,n){return{source:t,target:l[n]}}),s=o.k(u.concat(l)).force("charge",o.j().distanceMax(80)).force("link",o.i(f).distance(4).iterations(4)).stop(),d=0;d<n;++d)s.tick();t.attr("x",function(t,n){return l[n].x}).attr("y",function(t,n){return l[n].y}).each(function(t,n){var e=Math.atan2(l[n].y-u[n].fy,l[n].x-u[n].fx);o.x(this).call(e>Math.PI/4&&e<=3*Math.PI/4?i:e>-Math.PI/4&&e<=Math.PI/4?a:e>3*-Math.PI/4&&e<=3*Math.PI/4?c:r)})})},drawChord:function(t,n,e,a){f=c(t,n,e);var r=.5*Math.min(n,e)-30,i=r-20;f.attr("viewBox",[-n/2,-e/2,n,e]).attr("font-size",10).attr("font-family","sans-serif");var u=o.d().padAngle(.05).sortSubgroups(o.f)(a),l=o.t().radius(i),s=o.l(",.0",1e3),d=o.v().domain(o.r(4)).range(["#c6dbef","#6baed6","#2171b5","#08306b"]),p=o.a().innerRadius(i).outerRadius(r),m=f.append("g").selectAll("g").data(u.groups).enter().append("g");m.append("path").attr("fill",function(t){return d(t.index)}).attr("stroke",function(t){return o.s(d(t.index)).darker()}).attr("d",p);var x=m.append("g").selectAll("g").data(function(t){return function(t,n){var e=(t.endAngle-t.startAngle)/t.value;return o.r(0,t.value,n).map(function(n){return{value:n,angle:n*e+t.startAngle}})}(t,1e3)}).enter().append("g").attr("transform",function(t){return"rotate(".concat(180*t.angle/Math.PI-90,") translate(").concat(r,",0)")});x.append("line").attr("stroke","#000").attr("x2",6),x.filter(function(t){return t.value%5e3===0}).append("text").attr("x",8).attr("dy",".35em").attr("transform",function(t){return t.angle>Math.PI?"rotate(180) translate(-16)":null}).attr("text-anchor",function(t){return t.angle>Math.PI?"end":null}).text(function(t){return s(t.value)}),f.append("g").attr("fill-opacity",.67).selectAll("path").data(u).enter().append("path").attr("d",l).attr("fill",function(t){return d(t.target.index)}).attr("stroke",function(t){return o.s(d(t.target.index)).darker()})},drawLines:function(t,n,e,a){u=c(t,n,e);var r={top:50,right:50,bottom:50,left:100},i=n-r.left-r.right,l=e-r.top-r.bottom,f=u.attr("width",i+r.left+r.right).attr("height",l+r.top+r.bottom).append("g").attr("transform","translate(".concat(r.left,",").concat(r.top,")"));p=a;var s=[];if(d)for(var m in p){var x=p[m].WORLD[d];s.push({year:new Date(m),value:Number(x)})}console.log(s);var y=o.u().domain([o.q(s,function(t){return t.year}),o.p(s,function(t){return t.year})]).nice().range([0,i]),g=o.u().domain([o.q(s,function(t){return t.value}),o.p(s,function(t){return t.value})]).nice().range([l,0]),h=o.o().x(function(t){return y(t.year)}).y(function(t){return g(t.value)}).curve(o.e);f.append("g").attr("class","x-axis").attr("transform","translate(0,".concat(l,")")).call(o.b(y).tickFormat(o.y("%Y"))),f.append("g").attr("class","y-axis").call(o.c(g)),f.append("path").datum(s).attr("class","line").attr("d",h),f.append("g").attr("class","dots").selectAll().data(s).enter().append("circle").attr("cx",function(t){return y(t.year)}).attr("cy",function(t){return g(t.value)}).attr("r",5)}},d="SWE",p=null;function m(t){o.x(".selected").classed("selected",!1),o.x(this).classed("selected",!0),d=t.id,function(){var t=u.selectAll("g"),n={top:50,right:50,bottom:50,left:100},e=u.attr("width")-n.left-n.right,a=u.attr("height")-n.top-n.bottom,r=[];if(d)for(var c in p){var i=p[c].WORLD[d];r.push({year:new Date(c),value:Number(i)})}console.log(r);var l=o.u().domain([o.q(r,function(t){return t.year}),o.p(r,function(t){return t.year})]).nice().range([0,e]),f=o.u().domain([o.q(r,function(t){return t.value}),o.p(r,function(t){return t.value})]).nice().range([a,0]);t.select(".y-axis").call(o.c(f));var s=o.o().x(function(t){return l(t.year)}).y(function(t){return f(t.value)}).curve(o.e);t.select(".line").datum(r).transition().duration(1e3).attr("d",s),t.selectAll(".dots circle").data(r).transition().duration(1e3).attr("cx",function(t){return l(t.year)}).attr("cy",function(t){return f(t.value)}).attr("r",5)}()}e(5),e(7);var x=[[16,16,13,12,0,6],[1,0,12,10,6,1],[9,10,13,0,5,5],[15,1,14,16,9,16],[5,10,16,16,10,0],[9,8,2,13,13,9]],y=[{name:"A",x:21,y:110},{name:"B",x:22.8,y:93},{name:"C",x:18.7,y:175},{name:"D",x:14.3,y:245},{name:"E",x:24.4,y:62},{name:"F",x:14.7,y:230},{name:"G",x:32.4,y:66},{name:"H",x:30.4,y:52},{name:"I",x:33.9,y:65},{name:"J",x:15.5,y:150},{name:"K",x:15.2,y:150},{name:"L",x:13.3,y:245},{name:"M",x:19.2,y:175},{name:"N",x:27.3,y:66},{name:"O",x:26,y:91},{name:"P",x:30.4,y:113},{name:"Q",x:15.8,y:264},{name:"R",x:19.7,y:175},{name:"S",x:15,y:335},{name:"T",x:21.4,y:109}],g=[1990,1995,2e3,2005,2010,2015,2017];Promise.all(g.map(function(t){return Object(r.b)("./data/migration_flows/".concat(t,"f.tsv"))})).then(function(t){var n={};t.forEach(function(t,e){n[g[e]]={},t.forEach(function(t){return n[g[e]][t.Country]=t})}),console.log(n),Promise.all([Object(r.a)("./data/countries.json"),Object(r.b)("./data/population.tsv")]).then(function(t){var e=Object(a.a)(t,2),r=e[0],o=e[1];s.drawPlot("#plot",600,420,y),s.drawLines("#lines",800,420,n),s.drawMap("#map",800,420,r,o),s.drawChord("#chord",600,420,x)})})}],[[4,2,1]]]);
//# sourceMappingURL=main.f3fc6268.chunk.js.map