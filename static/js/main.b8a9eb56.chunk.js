(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{170:function(t,e,n){},172:function(t,e,n){},174:function(t,e,n){"use strict";n.r(e);var a=n(87),r=n(1),o=n.n(r),c=n(7),i=n.n(c),u=n(21),l=n(39),s=n(40),d=n(42),f=n(41),p=n(43),m=n(85),h=(n(149),{1990:"1990",1995:"1995",2000:"2000",2005:"2005",2010:"2010",2015:"2015",2017:"2017"});function g(t){console.log(t)}var y=function(t){function e(){return Object(l.a)(this,e),Object(d.a)(this,Object(f.a)(e).apply(this,arguments))}return Object(p.a)(e,t),Object(s.a)(e,[{key:"render",value:function(){return o.a.createElement("div",{style:{padding:"0.4em 4em 1em"}},o.a.createElement(m.a.Range,{min:1990,max:2017,marks:h,step:null,onChange:g,defaultValue:[2005,2015]}))}}]),e}(o.a.PureComponent),x=n(88),v=function(t){function e(){return Object(l.a)(this,e),Object(d.a)(this,Object(f.a)(e).apply(this,arguments))}return Object(p.a)(e,t),Object(s.a)(e,[{key:"render",value:function(){var t=this.props.countries.map(function(t){return{value:t.code3,label:t.name,group:t.region}});return o.a.createElement(x.a,Object.assign({isMulti:!0,placeholder:"Select countries...",options:t},this.props))}}]),e}(o.a.PureComponent),b=n(2);function w(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{width:400,height:400},n=arguments.length>2?arguments[2]:void 0,a=Object(b.x)(t).append("svg").attr("width",e.width).attr("height",e.height);return void 0!==n&&a.append("g").attr("transform","translate(".concat(n.left||0,",").concat(n.top||0,")")),a}var j,O={draw:function(t,e,n,a){j=w(t,{width:e,height:n});var r=.5*Math.min(e,n)-30,o=r-20;j.attr("viewBox",[-e/2,-n/2,e,n]).attr("font-size",10).attr("font-family","sans-serif");var c=b.d().padAngle(.05).sortSubgroups(b.f)(a),i=b.t().radius(o),u=b.l(",.0",1e3),l=b.v().domain(b.r(4)).range(["#c6dbef","#6baed6","#2171b5","#08306b"]),s=b.a().innerRadius(o).outerRadius(r),d=j.append("g").selectAll("g").data(c.groups).enter().append("g");d.append("path").attr("fill",function(t){return l(t.index)}).attr("stroke",function(t){return b.s(l(t.index)).darker()}).attr("d",s);var f=d.append("g").selectAll("g").data(function(t){return function(t,e){var n=(t.endAngle-t.startAngle)/t.value;return b.r(0,t.value,e).map(function(e){return{value:e,angle:e*n+t.startAngle}})}(t,1e3)}).enter().append("g").attr("transform",function(t){return"rotate(".concat(180*t.angle/Math.PI-90,") translate(").concat(r,",0)")});f.append("line").attr("stroke","#000").attr("x2",6),f.filter(function(t){return t.value%5e3===0}).append("text").attr("x",8).attr("dy",".35em").attr("transform",function(t){return t.angle>Math.PI?"rotate(180) translate(-16)":null}).attr("text-anchor",function(t){return t.angle>Math.PI?"end":null}).text(function(t){return u(t.value)}),j.append("g").attr("fill-opacity",.67).selectAll("path").data(c).enter().append("path").attr("d",i).attr("fill",function(t){return l(t.target.index)}).attr("stroke",function(t){return b.s(l(t.target.index)).darker()})},update:function(t,e){}};var k,A={draw:function(t,e,n,a){k=w(t,{width:e,height:n});var r={top:20,right:20,bottom:30,left:40},o=b.u().domain(b.h(a,function(t){return t.x})).nice().range([r.left,e-r.right]),c=b.u().domain(b.h(a,function(t){return t.y})).nice().range([n-r.bottom,r.top]);k.append("g").attr("class","axis-x").call(function(t){t.attr("transform","translate(0,".concat(n-r.bottom,")")).call(b.b(o)).call(function(t){return t.select(".domain").remove()})}),k.append("g").attr("class","axis-y").call(function(t){t.attr("transform","translate(".concat(r.left,",0)")).call(b.c(c)).call(function(t){return t.select(".domain").remove()}).call(function(t){return t.select(".tick:last-of-type text").clone()})}),k.append("g").attr("class","circles").selectAll("circle").data(a).enter().append("circle").attr("cx",function(t){return o(t.x)}).attr("cy",function(t){return c(t.y)}).attr("r",4),k.append("g").attr("class","text").selectAll("text").data(a).enter().append("text").attr("x",function(t){return o(t.x)}).attr("y",function(t){return c(t.y)}).text(function(t){return t.name}).call(function(t){for(var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:300,n=t.nodes(),a=function(t){return t.attr("text-anchor","start").attr("dy","0.32em")},r=function(t){return t.attr("text-anchor","end").attr("dy","0.32em")},o=function(t){return t.attr("text-anchor","middle").attr("dy","0.0em")},c=function(t){return t.attr("text-anchor","middle").attr("dy","0.8em")},i=n.map(function(t){return{fx:+t.getAttribute("x"),fy:+t.getAttribute("y")}}),u=i.map(function(t){var e=t.fx,n=t.fy;return{x:e,y:n}}),l=i.map(function(t,e){return{source:t,target:u[e]}}),s=b.k(i.concat(u)).force("charge",b.j().distanceMax(80)).force("link",b.i(l).distance(4).iterations(4)).stop(),d=0;d<e;++d)s.tick();t.attr("x",function(t,e){return u[e].x}).attr("y",function(t,e){return u[e].y}).each(function(t,e){var n=Math.atan2(u[e].y-i[e].fy,u[e].x-i[e].fx);b.x(this).call(n>Math.PI/4&&n<=3*Math.PI/4?c:n>-Math.PI/4&&n<=Math.PI/4?a:n>3*-Math.PI/4&&n<=3*Math.PI/4?o:r)})})},update:function(t,e){}};var M,P,E=n(31),I=n.n(E),C={draw:function(t,e,n,a){var r={top:50,right:50,bottom:50,left:60},o=e-r.left-r.right,c=n-r.top-r.bottom,i=(M=w(t,{width:e,height:n})).append("g").attr("transform","translate(".concat(r.left,",").concat(r.top,")"));P=a;var u=[],l=I.a.get("selectedCountry");if(l)for(var s in P){var d=P[s].WORLD[l];u.push({year:new Date(s),value:Number(d)})}console.log(u);var f=b.u().domain([b.q(u,function(t){return t.year}),b.p(u,function(t){return t.year})]).nice().range([0,o]),p=b.u().domain([b.q(u,function(t){return t.value}),b.p(u,function(t){return t.value})]).nice().range([c,0]),m=b.o().x(function(t){return f(t.year)}).y(function(t){return p(t.value)}).curve(b.e);i.append("g").attr("class","x-axis").attr("transform","translate(0,".concat(c,")")).call(b.b(f).tickFormat(b.y("%Y"))),i.append("g").attr("class","y-axis").call(b.c(p)),i.append("path").datum(u).attr("class","line").attr("d",m),i.append("g").attr("class","dots").selectAll().data(u).enter().append("circle").attr("cx",function(t){return f(t.year)}).attr("cy",function(t){return p(t.value)}).attr("r",5)},update:function(){var t=M.selectAll("g"),e={top:50,right:50,bottom:50,left:100},n=M.attr("width")-e.left-e.right,a=M.attr("height")-e.top-e.bottom,r=[],o=I.a.get("selectedCountry");if(o)for(var c in P){var i=P[c].WORLD[o];r.push({year:new Date(c),value:Number(i)})}console.log(r);var u=b.u().domain([b.q(r,function(t){return t.year}),b.p(r,function(t){return t.year})]).nice().range([0,n]),l=b.u().domain([b.q(r,function(t){return t.value}),b.p(r,function(t){return t.value})]).nice().range([a,0]);t.select(".y-axis").call(b.c(l));var s=b.o().x(function(t){return u(t.year)}).y(function(t){return l(t.value)}).curve(b.e);t.select(".line").datum(r).transition().duration(1e3).attr("d",s),t.selectAll(".dots circle").data(r).transition().duration(1e3).attr("cx",function(t){return u(t.year)}).attr("cy",function(t){return l(t.value)}).attr("r",5)}};var R,S={draw:function(t,e,n,a,r){R=w(t,{width:e,height:n});var o={};r.forEach(function(t){return o[t.id]=+t.population});var c=b.w().domain([10,100,500,1e3,5e3,1e4,5e4,1e5,5e5,15e5].map(function(t){return 1e3*t})).range(["#f7fbff","#deebf7","#c6dbef","#9ecae1","#6baed6","#4292c6","#2171b5","#08519c","#08306b","#03132b"]),i=b.m().scale(e/4).translate([e/2,n/1.2]),u=b.n().projection(i),l=b.z().scaleExtent([1,6]).on("zoom",function(){s.selectAll("path").attr("transform",b.g.transform)});R.call(l);var s=R.append("g").attr("class","countries");s.selectAll("path").data(a.features).enter().append("path").attr("id",function(t){return t.id}).attr("name",function(t){return t.properties.name}).attr("d",u).style("fill",function(t){return c(o[t.id])}).on("click",D).on("mouseover",function(){}).on("mouseout",function(){}).on("contextmenu",function(){console.log("right clicked...")}).append("title").text(function(t){return"".concat(t.id,": ").concat(t.properties.name)})},update:function(t,e){}};function D(t){b.x(".selected").classed("selected",!1),b.x(this).classed("selected",!0),I.a.set("selectedCountry",t.id),C.update()}n(170),n(172);var q=[[16,16,13,12,0,6],[1,0,12,10,6,1],[9,10,13,0,5,5],[15,1,14,16,9,16],[5,10,16,16,10,0],[9,8,2,13,13,9]],B=[{name:"A",x:21,y:110},{name:"B",x:22.8,y:93},{name:"C",x:18.7,y:175},{name:"D",x:14.3,y:245},{name:"E",x:24.4,y:62},{name:"F",x:14.7,y:230},{name:"G",x:32.4,y:66},{name:"H",x:30.4,y:52},{name:"I",x:33.9,y:65},{name:"J",x:15.5,y:150},{name:"K",x:15.2,y:150},{name:"L",x:13.3,y:245},{name:"M",x:19.2,y:175},{name:"N",x:27.3,y:66},{name:"O",x:26,y:91},{name:"P",x:30.4,y:113},{name:"Q",x:15.8,y:264},{name:"R",x:19.7,y:175},{name:"S",x:15,y:335},{name:"T",x:21.4,y:109}],z=[1990,1995,2e3,2005,2010,2015,2017];function J(t){console.log("Country Selection:"),console.log(t)}Promise.all(z.map(function(t){return Object(u.b)("./data/migration_flows/".concat(t,"f.tsv"))})).then(function(t){var e={};t.forEach(function(t,n){e[z[n]]={},t.forEach(function(t){return e[z[n]][t.Country]=t})}),Promise.all([Object(u.a)("./data/countries.json"),Object(u.b)("./data/conversion.tsv"),Object(u.b)("./data/population.tsv")]).then(function(t){!function(t,e){var n=Object(a.a)(t,3),r=n[0],c=n[1],u=n[2];A.draw("#plot",600,420,B),C.draw("#lines",800,420,e),S.draw("#map",800,420,r,u),O.draw("#chord",600,420,q);var l=o.a.createElement(v,{countries:c,onChange:J}),s=o.a.createElement(y,null);i.a.render(l,document.getElementById("countrySelect")),i.a.render(s,document.getElementById("yearSlider"))}(t,e)})})},89:function(t,e,n){t.exports=n(174)}},[[89,2,1]]]);
//# sourceMappingURL=main.b8a9eb56.chunk.js.map