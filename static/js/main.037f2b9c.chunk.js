(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{192:function(t,e,n){},194:function(t,e,n){},196:function(t,e,n){"use strict";n.r(e);var a=n(98),r=n(15),o=n.n(r),c=n(1),i=n.n(c),u=n(8),l=n.n(u),s=n(22),d=n(41),f=n(42),p=n(45),m=n(43),h=n(46),v=n(96),g=(n(169),{1990:"1990",1995:"1995",2000:"2000",2005:"2005",2010:"2010",2015:"2015",2017:"2017"});function x(t){console.log(t)}var y=function(t){function e(){return Object(d.a)(this,e),Object(p.a)(this,Object(m.a)(e).apply(this,arguments))}return Object(h.a)(e,t),Object(f.a)(e,[{key:"render",value:function(){return i.a.createElement("div",{style:{padding:"0.4em 4em 1em"}},i.a.createElement(v.a.Range,{min:1990,max:2017,marks:g,step:null,onChange:x,defaultValue:[2005,2015]}))}}]),e}(i.a.PureComponent),b=n(93),w=n(95),A=n.n(w),j=function(t){function e(){return Object(d.a)(this,e),Object(p.a)(this,Object(m.a)(e).apply(this,arguments))}return Object(h.a)(e,t),Object(f.a)(e,[{key:"render",value:function(){var t=this.props.countries.map(function(t){return{value:t.code3,label:t.name}});return i.a.createElement(b.a,Object.assign({isMulti:!0,placeholder:"Select countries...",components:A.a,onBlurResetsInput:!1,onSelectResetsInput:!1,onCloseResetsInput:!1,options:t},this.props))}}]),e}(i.a.PureComponent),k=n(2);function O(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{width:400,height:400},n=arguments.length>2?arguments[2]:void 0,a=Object(k.A)(t).append("svg").attr("width",e.width).attr("height",e.height);return void 0!==n?a.append("g").attr("class","main").attr("transform","translate(".concat(n.left||0,",").concat(n.top||0,")")):a}var I,C={draw:function(t,e,n,a){I=O(t,{width:e,height:n});var r=.5*Math.min(e,n)-30,o=r-20;I.attr("viewBox",[-e/2,-n/2,e,n]).attr("font-size",10).attr("font-family","sans-serif");var c=k.d().padAngle(.05).sortSubgroups(k.f)(a),i=k.u().radius(o),u=k.m(",.0",1e3),l=k.w().domain(k.s(4)).range(["#c6dbef","#6baed6","#2171b5","#08306b"]),s=k.a().innerRadius(o).outerRadius(r),d=I.append("g").selectAll("g").data(c.groups).enter().append("g");d.append("path").attr("fill",function(t){return l(t.index)}).attr("stroke",function(t){return k.t(l(t.index)).darker()}).attr("d",s);var f=d.append("g").selectAll("g").data(function(t){return function(t,e){var n=(t.endAngle-t.startAngle)/t.value;return k.s(0,t.value,e).map(function(e){return{value:e,angle:e*n+t.startAngle}})}(t,1e3)}).enter().append("g").attr("transform",function(t){return"rotate(".concat(180*t.angle/Math.PI-90,") translate(").concat(r,",0)")});f.append("line").attr("stroke","#000").attr("x2",6),f.filter(function(t){return t.value%5e3===0}).append("text").attr("x",8).attr("dy",".35em").attr("transform",function(t){return t.angle>Math.PI?"rotate(180) translate(-16)":null}).attr("text-anchor",function(t){return t.angle>Math.PI?"end":null}).text(function(t){return u(t.value)}),I.append("g").attr("fill-opacity",.67).selectAll("path").data(c).enter().append("path").attr("d",i).attr("fill",function(t){return l(t.target.index)}).attr("stroke",function(t){return k.t(l(t.target.index)).darker()})},update:function(t,e){}};var E,M={draw:function(t,e,n,a){E=O(t,{width:e,height:n});var r={top:20,right:20,bottom:30,left:40},o=k.v().domain(k.h(a,function(t){return t.x})).nice().range([r.left,e-r.right]),c=k.v().domain(k.h(a,function(t){return t.y})).nice().range([n-r.bottom,r.top]);E.append("g").attr("class","axis-x").call(function(t){t.attr("transform","translate(0,".concat(n-r.bottom,")")).call(k.b(o)).call(function(t){return t.select(".domain").remove()})}),E.append("g").attr("class","axis-y").call(function(t){t.attr("transform","translate(".concat(r.left,",0)")).call(k.c(c)).call(function(t){return t.select(".domain").remove()}).call(function(t){return t.select(".tick:last-of-type text").clone()})}),E.append("g").attr("class","circles").selectAll("circle").data(a).enter().append("circle").attr("cx",function(t){return o(t.x)}).attr("cy",function(t){return c(t.y)}).attr("r",4),E.append("g").attr("class","text").selectAll("text").data(a).enter().append("text").attr("x",function(t){return o(t.x)}).attr("y",function(t){return c(t.y)}).text(function(t){return t.name}).call(function(t){for(var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:300,n=t.nodes(),a=function(t){return t.attr("text-anchor","start").attr("dy","0.32em")},r=function(t){return t.attr("text-anchor","end").attr("dy","0.32em")},o=function(t){return t.attr("text-anchor","middle").attr("dy","0.0em")},c=function(t){return t.attr("text-anchor","middle").attr("dy","0.8em")},i=n.map(function(t){return{fx:+t.getAttribute("x"),fy:+t.getAttribute("y")}}),u=i.map(function(t){var e=t.fx,n=t.fy;return{x:e,y:n}}),l=i.map(function(t,e){return{source:t,target:u[e]}}),s=k.k(i.concat(u)).force("charge",k.j().distanceMax(80)).force("link",k.i(l).distance(4).iterations(4)).stop(),d=0;d<e;++d)s.tick();t.attr("x",function(t,e){return u[e].x}).attr("y",function(t,e){return u[e].y}).each(function(t,e){var n=Math.atan2(u[e].y-i[e].fy,u[e].x-i[e].fx);k.A(this).call(n>Math.PI/4&&n<=3*Math.PI/4?c:n>-Math.PI/4&&n<=Math.PI/4?a:n>3*-Math.PI/4&&n<=3*Math.PI/4?o:r)})})},update:function(t,e){}};var P,S,R,B={draw:function(t,e,n,a){S={width:e,height:n},P=O(t,{width:e,height:n},z),R=a,F()},update:F},z={top:10,right:20,bottom:20,left:40};function F(){var t=S.width-z.left-z.right,e=S.height-z.top-z.bottom,n=[],a=o.a.get("selectedCountries");if(a&&0!==a.length){var r=!0,c=!1,i=void 0;try{for(var u,l=a[Symbol.iterator]();!(r=(u=l.next()).done);r=!0){var s=u.value,d=[];for(var f in R){var p=R[f].WORLD[s];d.push({year:Number(f),value:Number(p)})}n.push(d)}}catch(j){c=!0,i=j}finally{try{r||null==l.return||l.return()}finally{if(c)throw i}}var m=n.reduce(function(t,e){return t.concat(e)},[]),h=function(t,e){return[k.r(t,e),k.q(t,e)]},v=k.v().domain(h(m,function(t){return t.year})).nice().range([0,t]),g=k.v().domain(h(m,function(t){return t.value})).nice().range([e,0]),x=k.b(v).tickFormat(k.l("d")),y=k.c(g).tickFormat(k.l("~s")),b=k.p().x(function(t){return v(t.year)}).y(function(t){return g(t.value)}).curve(k.e);P.selectAll(".dots").remove(),P.selectAll(".line").remove(),P.select(".xAxis").remove(),P.select(".yAxis").remove(),P.append("g").attr("class","xAxis").attr("transform","translate(0,".concat(e,")")).call(x),P.append("g").attr("class","yAxis").call(y);for(var w=0;w<n.length;w++){var A=k.z[6][w%6];P.append("path").datum(n[w]).attr("stroke",A).attr("class","line").attr("d",b),P.append("g").attr("class","dots").attr("fill",A).attr("stroke",A).selectAll().data(n[w]).enter().append("circle").attr("cx",function(t){return v(t.year)}).attr("cy",function(t){return g(t.value)}).attr("r",5)}}}var J,N={draw:function(t,e,n,a,r){J=O(t,{width:e,height:n});var o={};r.forEach(function(t){return o[t.id]=+t.population});var c=k.x().domain([10,100,500,1e3,5e3,1e4,5e4,1e5,5e5].map(function(t){return 1e3*t})).range(k.y[9]),i=k.n().scale(e/4).translate([e/2,n/1.2]),u=k.o().projection(i),l=k.B().scaleExtent([.6,7]).on("zoom",function(){s.selectAll("path").attr("transform",k.g.transform)});J.call(l);var s=J.append("g").attr("class","countries");s.selectAll("path").data(a.features).enter().append("path").attr("id",function(t){return t.id}).attr("name",function(t){return t.properties.name}).attr("d",u).style("fill",function(t){return c(o[t.id])}).on("click",G).on("mouseover",D).on("mouseout",L).on("contextmenu",q).append("title").text(function(t){return"".concat(t.id,": ").concat(t.properties.name)}),H()},update:H};function D(){}function L(){}function q(){console.log("right clicked...")}function G(t){var e=new Set(o.a.get("selectedCountries"));e.add(t.id),o.a.set("selectedCountries",Array.from(e)),H()}function H(){var t=o.a.get("selectedCountries")||[],e=k.z[6];k.A(".selected").classed("selected",!1),t.forEach(function(t,n){k.A("path#"+t).style("fill",e[n%6]).classed("selected",!0)}),B.update()}n(192),n(194);o.a.remove("selectedCountries");var K=[[16,16,13,12,0,6],[1,0,12,10,6,1],[9,10,13,0,5,5],[15,1,14,16,9,16],[5,10,16,16,10,0],[9,8,2,13,13,9]],Q=[{name:"A",x:21,y:110},{name:"B",x:22.8,y:93},{name:"C",x:18.7,y:175},{name:"D",x:14.3,y:245},{name:"E",x:24.4,y:62},{name:"F",x:14.7,y:230},{name:"G",x:32.4,y:66},{name:"H",x:30.4,y:52},{name:"I",x:33.9,y:65},{name:"J",x:15.5,y:150},{name:"K",x:15.2,y:150},{name:"L",x:13.3,y:245},{name:"M",x:19.2,y:175},{name:"N",x:27.3,y:66},{name:"O",x:26,y:91},{name:"P",x:30.4,y:113},{name:"Q",x:15.8,y:264},{name:"R",x:19.7,y:175},{name:"S",x:15,y:335},{name:"T",x:21.4,y:109}],T=[1990,1995,2e3,2005,2010,2015,2017];function V(t){var e=new Set(o.a.get("selectedCountries"));t.forEach(function(t){return e.add(t.value)}),o.a.set("selectedCountries",Array.from(e)),N.update()}Promise.all(T.map(function(t){return Object(s.b)("./data/migration/".concat(t,".tsv"))})).then(function(t){var e={};t.forEach(function(t,n){e[T[n]]={},t.forEach(function(t){return e[T[n]][t.Country]=t})}),Promise.all([Object(s.a)("./data/countries.json"),Object(s.b)("./data/conversion.tsv"),Object(s.b)("./data/population.tsv")]).then(function(t){!function(t,e){var n=Object(a.a)(t,3),r=n[0],o=n[1],c=n[2];M.draw("#plot",600,420,Q),B.draw("#lines",1e3,420,e),N.draw("#map",1e3,420,r,c),C.draw("#chord",600,420,K),l.a.render(function(t,e){return i.a.createElement(j,{value:e,countries:t,onChange:V})}(o),document.getElementById("countrySelect")),l.a.render(i.a.createElement(y,null),document.getElementById("yearSlider"))}(t,e)})})},99:function(t,e,n){t.exports=n(196)}},[[99,2,1]]]);
//# sourceMappingURL=main.037f2b9c.chunk.js.map